---
layout: post
title:  "재밌지만 어려운 코딩, C++, SDL2 그리고 ECS"
author: "minxdive"
categories: diary
tags: [C++, SDL2, ECS]
image: 
---

C++ 에 관심이 생겨 배운 이유는 C++ 자체가 재밌어보였지만 또 게임을 만들어보고 싶었기 때문이다. 천천히 C++ 를 시작한지 수개월이 지났지만 너무나도 어려웠다. 코드가 조금만 길어지면 파악하는대도 애를 먹는다. 여러 이유가 있지만 결국 초보자들이 가장 많이하는 실수중에 하나인 읽기, 듣기만 하고 코딩은 직접하지 않는 실수를 범한게 가장 큰 실수였던거 같다.

직접 코딩을 하여 간단한 게임을 만들어보고 싶었지만 여전히 어려웠다. 그러던 도중 ECS(Entity Component System) 이라고 불리우는 게임 디자인 방법 중 하나를 발견하여 흥미롭게 읽으면서 이해하려고 노력했다. 아직 갈길은 멀지만 이 ECS 라는 방법은 재미있어 보였다. 

Entity(엔터티) 라는 하나의 개체에, 여러 Component(구성 요소) 들이 포함되고, 해당되는 System(시스템) 을 호출하여 동작하는 방식으로 이해하였다. 어떠한 공간에서 정사각형이라는 오브젝트가 아닌, 정사각형이라는 이름의 Entity 와 해당 id. 크기, 색, 위치 등의 Component, 그리고 Component 들을 조합하여 동작하는 System. 조금 다르지만 야구에서 선수들의 수많은 데이터(OPS, WAR, wRC+ 등등..)들을 보는 기분이었다.

야구에선 선수가 활약에 따라 여러 데이터가 나타나지만 ECS 에선 여러 데이터들이 모아져서 선수가 나타난다.

그렇다고 ECS 가 OOP 를 완벽하게 대체하여 현존하는 가장 완벽한 디자인 방법이라는 것은 아니다. ECS 가 효율적인 게임이 존재하고, 기존의 OOP 가 더 효율적인 게임이 존재한다고 한다. 따라서 무조건 하나의 방식만을 고집하면 좋은 방법은 아니라는 것이다. 그렇지만 개인적으로 너무 재미있는 방법이고 미래에는 더 많은 게임이 이 방식을 사용하지 않을까..?

그러나 초보자에겐 이 방식을 배우는 방법고 코드로 작성하기에는 너무나도 어려웠다. 구글에 검색만 해봐도 많은 예제코드들이 있었지만 유인원 수준도 안되는 실력으로는 이해하고 따라하기 어려웠다. 거기다 왜 인지는 모르겠으나 자료가 많은거 같으면서도 눈에 잘 안들어오는 기분이었다...?

그러던도중 유튜브에 한 대학의 온라인 강의를 발견하였다. Dave Churchill 이라는 캐나다(Newfoundland) Memorial 대학교에서 컴퓨터공학을 가르치시는 부교수(associate professor) 께서 진행하신 유튜브의 강의를 무료로 올려두신것을 시청하였다. 어려운 C++ 로 강의를 진행하였고, ECS 에 대하여 이해하기 쉽게 설명하고, 코드 또한 최대한 초보자가 접근하기 쉽게 되어있었다.

SFML 로 진행하는 강의였다. 나는 대신 SDL2 에 관심이 있어 SDL2 를 택했다. 

강의 중 과제가 있길래 따라해보면서 느낀점은 사실 단순했다. 

"코딩을 잘하고 싶으면 일단 만들어."

였다. 왜냐하면 윗 문단에서 이야기한 초보자의 실수를 범하고 있었기 때문이었다. 나는 과제를 흉내내던중 분명히 어려운 난이도가 아님에도 불구하고 애를 먹고 있었다. 여기선 무슨 자료를 사용해야하지? 왜 나온대로 했는데 동작이 안되지? 막혀서 하루종일 고민하고, 구글에 검색하고, AI 에 물어볼 정도였다.

그래도 일단 과제 하나를 만들어보니 재밌었다. 내가 생각한대로 화면에서 그대로 나타나면 기분도 좋았다. 자연스럽게 새로 알거나 다시 알게된 자료형, 키워드도 많았다. `friend`, `std::shared_ptr<T>`, `std::map<key, value>`, `std::remove_if`, 참조와 참조 리턴함수 `&`, `*this` 포인터, `for-each`, `auto`, 람다식 `for (auto& [key, value])`, `[&]`, 전방선언, 연산자 오버로딩.. 생각나는 것만 적어놓으니 벌써 10가지도 넘어버렸다. 

나도 앞으로도 배울게 많고 할일도 많지만 코딩이 재밌는점은 나 역시도 자연스럽게 습관과 생각이 바뀐다는 점이었다. 스스로 생각하기, 최대한 쉽고 작게 나누어서 해결하기, 바퀴를 재발명하지 말기... ㅋㅋ

하고싶은거, 필요한게 있을때 사람은 가장 열심히 한다고 한다. 이번에 나 역시 그랬다. 앞으로 무엇을 하든간에 코딩은 계속 할거같다. 그냥.. 재밌으니까

```c++
#include <iostream>
#include "SDL2/SDL.h"
#include "game.h"

int main(int argc, char* argv[]) 
{
  try {
    Game game = Game();
    game.start("Hello SDL2! Hello ECS!");
    return 0;
  } catch (std::runtime_error& e) {
    std::cerr << e.what() << '\n';
    return -1;
  } catch (...) {
    std::cerr << "exception!\n";
    return -2;
  }
  return 0;
}

```

[geometry game](https://github.com/minxdive/exercise/tree/main/SDL2_ECS_drill1)

정말 별것도 아니지만 그 결과물이다.

<br><br><br>